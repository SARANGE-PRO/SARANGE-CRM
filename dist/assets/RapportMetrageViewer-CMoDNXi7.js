import{j as e}from"./index-DMGdsos9.js";import{r,w as f,L as u}from"./vendor-DQYctaBf.js";import{D as p}from"./utils-CKkNC6ps.js";const w=({rapportMetrage:s,rapportMetrageFileId:t,title:x,collapsed:m=!1})=>{const[l,o]=r.useState(s||null),[c,d]=r.useState(!1),[n,h]=r.useState(!m);return r.useEffect(()=>{if(s){o(s);return}t&&(d(!0),p.getFile(t).then(a=>{if(a){const i=new FileReader;i.onload=()=>o(i.result),i.readAsText(a)}}).catch(a=>console.error("Erreur chargement rapport:",a)).finally(()=>d(!1)))},[s,t]),!l&&!c&&!t?null:e.jsxs("section",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>h(!n),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{size:18,className:"text-brand-600"}),e.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:x||"Rapport de Métrage"})]}),e.jsx("span",{className:`text-xs text-slate-400 transition-transform ${n?"rotate-180":""}`,children:"▾"})]}),n&&e.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700",children:c?e.jsxs("div",{className:"flex items-center justify-center gap-2 p-8 text-slate-400",children:[e.jsx(u,{size:20,className:"animate-spin"}),e.jsx("span",{className:"text-sm",children:"Chargement du rapport..."})]}):l?e.jsx("iframe",{srcDoc:l,sandbox:"allow-same-origin",className:"w-full border-0 bg-white",style:{minHeight:"400px",height:"60vh",maxHeight:"800px"},title:"Rapport de métrage"}):e.jsx("div",{className:"p-6 text-center text-slate-400 text-sm italic",children:"Rapport non disponible"})})]})};export{w as R};
