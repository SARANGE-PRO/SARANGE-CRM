import{j as e,d as i}from"./index-DUWccq4l.js";import{r as u,k as f,t as b,J as j,T as g}from"./vendor-BIhwZqk1.js";import"./utils-DMIh2B2L.js";const w=({onBack:c,state:o,onImport:l})=>{const n=u.useRef(null),d=()=>{const a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o)),t=document.createElement("a");t.setAttribute("href",a);const r=new Date().toISOString().split("T")[0];t.setAttribute("download",`sarange_backup_${r}.json`),document.body.appendChild(t),t.click(),t.remove()},x=()=>n.current.click(),m=a=>{const t=a.target.files[0];if(!t)return;const r=new FileReader;r.onload=p=>{try{const s=JSON.parse(p.target.result);if(!s.chantiers||!s.products){alert("Format invalide.");return}confirm("Attention : L'importation va ecraser TOUTES les donnees. Continuer ?")&&(l(s),alert("Restauration reussie !"))}catch(s){console.error(s),alert("Erreur de lecture.")}},r.readAsText(t)},h=()=>{confirm("DANGER : Tout effacer ? Action irreversible.")&&l({chantiers:[],products:[],currentChantierId:null})};return e.jsxs("div",{className:"flex flex-col h-screen bg-slate-50 dark:bg-slate-950 animate-fade-in",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-4 py-3 safe-top-padding flex items-center gap-3 sticky top-0 z-10",children:[e.jsx("button",{onClick:c,className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-200",children:e.jsx(f,{size:24})}),e.jsx("h1",{className:"text-xl font-bold dark:text-white",children:"Parametres"})]}),e.jsxs("div",{className:"p-4 max-w-2xl mx-auto w-full space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-bold text-slate-500 uppercase mb-3 ml-1",children:"Donnees & Securite"}),e.jsxs(i,{children:[e.jsxs("div",{onClick:d,className:"p-4 border-b border-slate-100 dark:border-slate-800 cursor-pointer flex gap-3 items-center hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsx(b,{size:20,className:"text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium dark:text-white",children:"Sauvegarder (Export)"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Telecharger JSON"})]})]}),e.jsxs("div",{onClick:x,className:"p-4 cursor-pointer flex gap-3 items-center hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsx(j,{size:20,className:"text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium dark:text-white",children:"Restaurer (Import)"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Charger JSON"})]}),e.jsx("input",{type:"file",ref:n,onChange:m,accept:".json",className:"hidden"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-bold text-red-500 uppercase mb-3 ml-1",children:"Danger"}),e.jsx(i,{className:"border-red-200 dark:border-red-900",children:e.jsxs("div",{onClick:h,className:"p-4 cursor-pointer flex gap-3 items-center text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10",children:[e.jsx(g,{size:20}),e.jsx("span",{className:"font-medium",children:"Tout reinitialiser"})]})})]}),e.jsx("div",{className:"text-center mt-8 text-xs text-slate-400",children:"Sarange Pro v1.1 â€¢ Local-First"})]})]})};export{w as SettingsView};
