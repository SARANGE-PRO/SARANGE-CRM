import{u,j as e,B as f}from"./index-DMGdsos9.js";import{r as j,C as v,q as l,A as N,n as w,v as C,l as k}from"./vendor-DQYctaBf.js";import{S}from"./SmartAddress-wU2aEjgv.js";const P=({c:t,isTodo:o=!1,onClick:a,onPlanifier:r,compact:d=!1})=>{const{selectChantier:i,deleteChantier:x,duplicateChantier:c,updateChantierDate:p}=u(),[y,I]=j.useState(!1),n=!t.dateIntervention&&t.sendStatus!=="SENT"&&Date.now()-new Date(t.date).getTime()>3*24*60*60*1e3,h=s=>{s.stopPropagation(),r&&r(t.id)},m=s=>{s.stopPropagation(),p(t.id,t.dateIntervention)},b=s=>{s.stopPropagation(),window.confirm("Supprimer ce dossier ?")&&x(t.id)},g=s=>{s.stopPropagation(),c(t.id)};return e.jsxs("div",{onClick:()=>a?a(t.id):i(t.id),className:`relative group bg-white dark:bg-slate-900 p-4 rounded-xl border shadow-sm hover:shadow-md active:scale-[0.99] transition-all cursor-pointer overflow-hidden mb-3
                ${t.sendStatus==="SENT"?"border-green-200 dark:border-green-800 opacity-75 hover:opacity-100":n?"border-red-400 dark:border-red-500 ring-1 ring-red-400 dark:ring-red-500":"border-slate-200 dark:border-slate-800 hover:border-brand-400 dark:hover:border-brand-600"}
            `,children:[n&&e.jsx("div",{className:"absolute top-0 right-0 bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-bl-lg",children:"URGENT"}),e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"font-bold text-lg dark:text-white truncate pr-2",children:t.client}),t.sendStatus==="SENT"&&e.jsx(v,{size:16,className:"text-green-500"})]}),e.jsx("div",{className:"text-sm text-slate-500 mb-3 ml-[-5px]",children:e.jsx(S,{address:t.adresse,gps:t.gps})}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-2.5 flex items-center justify-between mb-3 text-sm",children:[t.dateIntervention?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Intervention"}),e.jsxs("span",{className:"font-bold text-brand-600 dark:text-brand-400 flex items-center gap-1",children:[e.jsx(l,{size:14}),new Date(t.dateIntervention).toLocaleString("fr-FR",{dateStyle:"short",timeStyle:"short"})]})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Créé le"}),e.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("fr-FR")})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[t.dateIntervention&&e.jsx("div",{title:t.googleEventId?"Synchronisé Google Calendar":"Non synchronisé Google Calendar",className:"ml-1",children:t.googleEventId?e.jsx("img",{src:"https://www.gstatic.com/images/branding/product/1x/calendar_2020q4_48dp.png",alt:"GCal OK",className:"w-4 h-4 opacity-80"}):e.jsx("button",{onClick:m,className:"text-orange-400 hover:text-orange-600 animate-pulse",title:"Cliquez pour forcer la synchro Google",children:e.jsx(N,{size:14})})}),t.telephone&&e.jsx("a",{href:`tel:${t.telephone}`,onClick:s=>s.stopPropagation(),className:"bg-white dark:bg-slate-700 p-2 rounded-full text-slate-600 dark:text-slate-300 shadow-sm border border-slate-100 dark:border-slate-600 hover:text-brand-600 hover:border-brand-600 transition-colors",children:e.jsx(w,{size:16})})]})]}),o&&e.jsx("div",{className:"flex gap-2 mt-2",children:e.jsx(f,{className:"flex-1 py-2 text-xs bg-brand-600 text-white shadow-md hover:bg-brand-700 h-10",onClick:h,icon:l,children:"PLANIFIER"})}),!d&&e.jsxs("div",{className:"flex items-center justify-end pt-2 mt-2 border-t border-slate-100 dark:border-slate-800 gap-2",children:[e.jsx("button",{onClick:g,className:"text-slate-400 hover:text-brand-500",title:"Dupliquer",children:e.jsx(C,{size:16})}),e.jsx("button",{onClick:b,className:"text-slate-400 hover:text-red-500",title:"Supprimer",children:e.jsx(k,{size:16})})]})]})};export{P as C};
