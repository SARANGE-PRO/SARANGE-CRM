const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardView-PiYWd8rz.js","assets/index-DMGdsos9.js","assets/vendor-DQYctaBf.js","assets/utils-CKkNC6ps.js","assets/index-C0JYi31O.css","assets/calendar-CKSkTVT9.js","assets/Modal-CBdi9DRh.js","assets/AddressInput-Bj7y3_j7.js","assets/Card-BAmCq0CR.js","assets/ChantierCard-C53h9ODy.js","assets/SmartAddress-wU2aEjgv.js","assets/StatusBanner-BmE7-72v.js","assets/CalendarView-B1MfSr52.js","assets/MapView-CLLvO7Fk.js","assets/MapView-Dgihpmma.css"])))=>i.map(i=>d[i]);
import{u as w,j as e,S as _,_ as b}from"./index-DMGdsos9.js";import{r as x,P as z,h as C,g as M,i as y,M as A,S as V,j as P,k as E,l as R,m as S,R as u}from"./vendor-DQYctaBf.js";import"./utils-CKkNC6ps.js";const T=u.lazy(()=>b(()=>import("./DashboardView-PiYWd8rz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(m=>({default:m.DashboardView}))),I=u.lazy(()=>b(()=>import("./CalendarView-B1MfSr52.js"),__vite__mapDeps([12,1,2,3,4,9,10]))),L=u.lazy(()=>b(()=>import("./MapView-CLLvO7Fk.js"),__vite__mapDeps([13,1,2,3,4,14]))),Q=({onNew:m,onNavigate:g,viewMode:j,isDark:t,toggleDark:i,onOpenSettings:l,onOpenTrash:r,isOnline:o,firebaseConnected:c})=>{const{state:v}=w(),[d,p]=x.useState("accueil"),[h,a]=x.useState(!1),[n,N]=x.useState(!1),f=(v.chantiers||[]).filter(s=>!s.deleted&&!s.purged).filter(s=>s.archived).length,k=[{id:"accueil",label:"Tableau de bord"},{id:"calendrier",label:"Planning Métreur"},{id:"carte",label:"Carte"}];return e.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-slate-900",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 pt-[max(1rem,env(safe-area-inset-top))] px-4 md:px-6 flex-shrink-0 shadow-sm z-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(z,{size:22,className:"text-brand-600"}),"Métrage Technique"]}),e.jsxs("div",{className:"flex gap-2 relative",children:[o?c?e.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-full",title:"Connecté au Cloud",children:e.jsx(C,{size:20,className:"text-green-500"})}):e.jsx("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/20 rounded-full animate-pulse",title:"Problème de connexion Firebase (Quota/Réseau)",children:e.jsx(M,{size:20,className:"text-orange-500"})}):e.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full",title:"Hors Connexion",children:e.jsx(y,{size:20,className:"text-slate-400"})}),e.jsx("button",{onClick:()=>a(!h),className:"flex items-center justify-center min-w-[44px] min-h-[44px] bg-slate-100 dark:bg-slate-800 rounded-xl text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:e.jsx(A,{size:20})}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in origin-top-right",children:e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsxs("button",{onClick:()=>{i(),a(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",children:[t?e.jsx(V,{size:16,className:"mr-3 text-orange-400"}):e.jsx(P,{size:16,className:"mr-3 text-brand-600"}),t?"Mode Clair":"Mode Sombre"]}),e.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-700 my-1"}),d==="accueil"&&e.jsxs("button",{onClick:()=>{N(!n),a(!1)},className:`w-full flex items-center px-3 py-2 text-sm rounded-lg transition-colors ${n?"bg-brand-50 text-brand-700 dark:bg-brand-900/40 dark:text-brand-300":"text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(E,{size:16,className:"mr-3"}),n?"Voir Dossiers Actifs":"Voir Archives",f>0&&e.jsx("span",{className:"ml-auto text-xs bg-slate-100 dark:bg-slate-600 px-1.5 rounded-full font-medium",children:f})]}),r&&e.jsxs("button",{onClick:()=>{r(),a(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg",children:[e.jsx(R,{size:16,className:"mr-3 text-red-500"}),"Corbeille"]}),l&&e.jsxs("button",{onClick:()=>{l(),a(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg",children:[e.jsx(S,{size:16,className:"mr-3"}),"Paramètres"]})]})})]})]})]}),e.jsx("div",{className:"flex items-center gap-6",children:k.map(s=>e.jsx("button",{onClick:()=>p(s.id),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${d===s.id?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:s.label},s.id))})]}),e.jsx("div",{className:"flex-1 overflow-auto relative",children:e.jsxs(x.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(_,{size:40,className:"text-brand-600"})}),children:[d==="accueil"&&e.jsx(T,{onNew:m,viewMode:j||"dashboard",setViewMode:g,isDark:t,toggleDark:i,onOpenSettings:l,onOpenTrash:r,isOnline:o,firebaseConnected:c,showArchived:n}),d==="calendrier"&&e.jsx(I,{isDark:t,toggleDark:i,onOpenSettings:l,onOpenTrash:r,isOnline:o,firebaseConnected:c}),d==="carte"&&e.jsx(L,{isDark:t,toggleDark:i,onOpenSettings:l,onOpenTrash:r,isOnline:o,firebaseConnected:c})]})})]})};export{Q as MetrageModule};
