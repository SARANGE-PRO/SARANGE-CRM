import{j as e,B as i}from"./index-DMGdsos9.js";import{r as m,a7 as h,l,A as p,g as d,t as f,ab as j}from"./vendor-DQYctaBf.js";import{C as g}from"./Card-BAmCq0CR.js";import{S as u}from"./StatusBanner-BmE7-72v.js";import"./utils-CKkNC6ps.js";const z=({onBack:o,state:a,actions:n})=>{const r=(Array.isArray(a==null?void 0:a.chantiers)?a.chantiers:[]).filter(s=>s&&s.deleted&&!s.purged).sort((s,t)=>new Date(t.deletedAt||0)-new Date(s.deletedAt||0)),[N,v]=m.useState(!1),c=s=>{if(!s)return 30;const t=24*60*60*1e3,x=Math.floor((Date.now()-new Date(s).getTime())/t);return Math.max(0,30-x)};return e.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-slate-900",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-4 py-3 flex items-center justify-between safe-top-padding",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:o,className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:e.jsx(h,{size:20,className:"text-slate-600 dark:text-slate-300"})}),e.jsxs("h1",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(l,{size:24,className:"text-red-500"}),"Corbeille",e.jsx("span",{className:"text-sm font-normal text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded-full",children:r.length})]})]}),r.length>0&&e.jsxs(i,{variant:"danger",className:"py-2 px-4 text-sm font-bold flex items-center gap-2",onClick:()=>n.emptyTrash(),children:[e.jsx(l,{size:16})," Vider"]})]}),e.jsx(u,{variant:"warning",icon:p,children:"Les éléments sont définitivement supprimés après 30 jours."}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto max-w-3xl mx-auto w-full",children:r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(l,{size:32,className:"opacity-50"})}),e.jsx("p",{className:"text-lg font-medium",children:"La corbeille est vide"}),e.jsx("p",{className:"text-sm",children:"Tout est propre !"})]}):e.jsx("div",{className:"space-y-3 pb-20",children:r.map(s=>{const t=c(s.deletedAt);return e.jsx(g,{className:"p-4 group border-l-4 border-l-red-500 hover:border-l-red-600 transition-all",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white line-through decoration-slate-400 decoration-2 text-slate-500",children:s.client}),e.jsx("p",{className:"text-sm text-slate-500",children:s.adresse}),e.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs font-mono text-slate-400",children:[e.jsxs("span",{children:["Supprimé le: ",new Date(s.deletedAt||Date.now()).toLocaleDateString()]}),t<=0?e.jsxs("span",{className:"text-red-600 font-bold flex items-center gap-1",children:[e.jsx(d,{size:10})," Suppression imminente"]}):t<=5?e.jsxs("span",{className:"text-red-600 font-bold flex items-center gap-1",children:[e.jsx(d,{size:10})," Expire dans ",t,"j"]}):e.jsxs("span",{className:"text-orange-500 flex items-center gap-1",children:[e.jsx(f,{size:10})," Expire dans ",t,"j"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{variant:"secondary",className:"p-3 h-14 w-14 !rounded-full shadow-sm",onClick:()=>n.restoreChantier(s.id),title:"Restaurer",children:e.jsx(j,{size:28,className:"text-green-600"})}),e.jsx(i,{variant:"secondary",className:"p-3 h-14 w-14 !rounded-full shadow-sm border-red-100 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>{confirm("Suppression définitive irréversible ?")&&n.hardDeleteChantier(s.id)},title:"Supprimer définitivement",children:e.jsx(l,{size:28,className:"text-red-500"})})]})]})},s.id)})})})]})};export{z as TrashView};
